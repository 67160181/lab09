# คำถามทดสอบความเข้าใจ (Assessment Questions)

---

**ส่วนที่ 1: Fetch API & HTTP Requests**

คำถาม 1.1 Fetch API คืออะไร ความแตกต่างระหว่าง Fetch API และ XMLHttpRequest คืออะไร
→ Fetch API คือ API สมัยใหม่สำหรับส่ง HTTP request แบบ Promise-based เขียนง่ายกว่าและรองรับ async/await ต่างจาก XMLHttpRequest ที่ใช้ callback และซับซ้อนกว่า

คำถาม 1.2 โค้ดนี้ทำอะไร อธิบายการทำงานแต่ละขั้นตอน

```js
fetch(url)
  .then((response) => response.json())
  .then((data) => console.log(data))
  .catch((error) => console.error(error));
```

→ ส่ง request ไปยัง url → แปลง response เป็น JSON → นำข้อมูลมาใช้ → หากเกิด network error จะเข้า .catch()

คำถาม 1.3 ถ้า API response ล้มเหลว (network error) จะถูก handle ที่ไหน .catch() จะจับได้หรือไม่
→ ถ้าเป็น network error จะถูกจับที่ .catch() แต่ถ้า response 404/500 ต้องเช็ค response.ok เอง

---

**ส่วนที่ 2: Geocoding API**

คำถาม 2.1 Geocoding API ทำหน้าที่อะไร ทำไมจึงต้องใช้ก่อนเรียก Weather API
→ ใช้แปลงชื่อเมืองเป็น latitude/longitude เพราะ Weather API ต้องใช้พิกัดแทนชื่อเมือง

คำถาม 2.2 When user searches “Bangkok” ควรส่ง request ไปที่ endpoint ไหนก่อน ได้ข้อมูลอะไรจาก response
→ ส่งไปที่ [https://geocoding-api.open-meteo.com/v1/search?name=Bangkok](https://geocoding-api.open-meteo.com/v1/search?name=Bangkok) แล้วได้ name, country, latitude, longitude

คำถาม 2.3 ถ้า user ค้นหาเมือง “Nonthaburi” ซึ่งชื่อเดียวกับเมืองอื่น app จะตัดสินใจอย่างไร
→ โค้ดใช้ count=1 จึงเลือกผลลัพธ์แรกจาก API

---

**ส่วนที่ 3: Weather Data & Parameters**

คำถาม 3.1 Weather API ต้องการ parameters อะไรบ้าง (latitude, longitude, …อื่นๆ)
→ latitude, longitude, current, hourly, timezone

คำถาม 3.2 Parameters นี้ request ข้อมูลอะไร ทำไมต้องใช้ weather_code

```js
"?latitude=13.7&longitude=100.5&current=temperature_2m,humidity,weather_code";
```

→ ขออุณหภูมิ ความชื้น และ weather_code ซึ่งใช้ระบุสภาพอากาศเพื่อแปลงเป็นข้อความ/emoji

คำถาม 3.3 ความแตกต่างระหว่าง current weather และ hourly forecast คืออะไร
→ current คือข้อมูลปัจจุบัน ส่วน hourly คือข้อมูลพยากรณ์รายชั่วโมงล่วงหน้า

---

**ส่วนที่ 4: Async/Await Pattern**

คำถาม 4.1 ทำไมจึงใช้ async/await แทน .then().catch() มีข้อดีอะไรบ้าง
→ ทำให้โค้ดอ่านง่ายเหมือน synchronous และจัดการ error ด้วย try-catch ได้ชัดเจน

คำถาม 4.2 await ทำอะไร ถ้าไม่ใช้ code จะเป็นยังไง
→ await รอ Promise resolve ก่อนทำบรรทัดถัดไป ถ้าไม่ใช้จะได้ Promise แทนข้อมูลจริง

คำถาม 4.3 try-catch block ใช้เพื่ออะไร ตกลง error ที่ catch ได้อะไร
→ ใช้ดักจับ error จาก await เช่น network error หรือ throw new Error()

---

**ส่วนที่ 5: DOM Manipulation**

คำถาม 5.1 เมื่อได้ข้อมูล weather มา app ต้องแสดงผล element ใดบ้าง
→ cityName, updateTime, description, temperature, feelsLike, humidity, windSpeed, pressure, visibility และ hourlyList

คำถาม 5.2 Loading spinner ปรากฏในไหน เมื่อไหร่ควรแสดง/ซ่อน
→ แสดงที่ div#loading ตอนเริ่ม fetch และซ่อนเมื่อได้ข้อมูลหรือเกิด error

คำถาม 5.3 ถ้าต้องอัปเดต temperature display ทุก 10 นาที ควรใช้ setInterval() หรือ setTimeout()
→ ใช้ setInterval() ทุก 600000 ms

---

**ส่วนที่ 6: Data Storage (LocalStorage)**

คำถาม 6.1 LocalStorage ใช้เพื่ออะไร บันทึก recent cities ยังไง
→ ใช้เก็บข้อมูลถาวรใน browser โดยใช้ localStorage.setItem("recentCities", JSON.stringify(cities))

คำถาม 6.2 ทำไมต้องใช้ JSON.stringify() ถ้าเก็บ object โดยตรงจะเป็นอย่างไร
→ เพราะ LocalStorage เก็บได้เฉพาะ string ถ้าเก็บ object ตรง ๆ จะถูกแปลงเป็น "[object Object]"

คำถาม 6.3 เมื่อ refresh หน้า app ควร restore recent cities จากไหน โค้ดเป็นยังไง
→ ดึงจาก localStorage.getItem("recentCities") แล้ว JSON.parse() เช่น

```js
JSON.parse(localStorage.getItem("recentCities")) || [];
```

---

**ส่วนที่ 7: Error Handling & Edge Cases**

คำถาม 7.1 ถ้า user ค้นหาเมืองที่ไม่มี (เช่น “XYZ”) app จะแสดง error อย่างไร
→ geocodeCity() จะ throw error แล้ว showError("ไม่พบเมืองนี้")

คำถาม 7.2 ถ้า network ไม่มี (offline) fetch จะ throw error หรือ return success
→ จะ throw error และเข้า catch block

คำถาม 7.3 เมื่อ hover หรือ click ที่ recent city button โปรแกรมจะทำอะไร
→ เรียก fetchWeather() ด้วย latitude/longitude ของเมืองนั้น

---

**ส่วนที่ 8: Weather Display**

คำถาม 8.1 Weather code 0 = Clear sky, 1 = Partly cloudy, 80 = Drizzle… เลือก icon/emoji ยังไง
→ ใช้ function getWeatherDescription() map weather_code กับ emoji

คำถาม 8.2 ความแตกต่างระหว่าง อุณหภูมิ (°C), ความชื้น (%), ความเร็วลม (m/s) คืออะไร
→ °C คือความร้อนของอากาศ, % คือปริมาณไอน้ำในอากาศ, m/s คือความเร็วการเคลื่อนที่ของลม

คำถาม 8.3 Hourly forecast แสดง 24 ชั่วโมง ต้องเลือก element ไหนจาก response
→ ใช้ data.hourly.time และ data.hourly.temperature_2m

---

**ส่วนที่ 9: Responsive Design & Mobile**

คำถาม 9.1 ใน mobile screen weather card ควร มี layout อย่างไร (vertical/horizontal)
→ ควรเป็น vertical เพื่ออ่านง่ายและเลื่อนลงได้สะดวก

คำถาม 9.2 เมื่อผู้ใช้ rotate device grid/flex ควรตัดสินใจอย่างไร
→ ใช้ media query ปรับ grid เป็น 2 คอลัมน์เมื่อหน้าจอกว้างขึ้น

คำถาม 9.3 Input field และ button บน mobile ต้องมี font size เท่าไร (ควรมากพอให้แตะง่าย)
→ อย่างน้อย 16px และปุ่มควรสูงประมาณ 44px ตามมาตรฐานการแตะ

---

**ส่วนที่ 10: Code Architecture & Enhancement**

คำถาม 10.1 ถ้าต้องสร้าง Weather class เพื่อจัดการ logic อย่างไร

```js
class WeatherApp {
  async searchCity(cityName) {}
  async fetchWeather(lat, lon) {}
  displayWeather(data) {}
}
```

→ แยก logic ค้นหา ดึงข้อมูล และแสดงผลไว้ใน class เพื่อลด global scope และจัดโครงสร้างให้ชัดเจน

คำถาม 10.2 วิธีเพิ่ม Favorite Cities feature ยังไง ต้องแก้ไข HTML/CSS/JS ส่วนไหนบ้าง
→ เพิ่มปุ่ม Favorite ใน HTML, เพิ่ม style ใน CSS, และเพิ่ม array favorites ใน JS พร้อมบันทึกลง LocalStorage

คำถาม 10.3 วิธีเพิ่ม Dark Mode ด้วย CSS variables ได้อย่างไร
→ กำหนดสีด้วย CSS variables เช่น --bg-color แล้วใช้ class .dark เปลี่ยนค่าตัวแปรผ่าน JavaScript
