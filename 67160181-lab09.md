# ส่วนที่ 1: การทำความเข้าใจโค้ด

---

### คำถาม 1.1 เหตุใดจึงต้องแยก duration และ timeLeft ออกจากกัน อธิบายความแตกต่าง

duration คือค่าเริ่มต้นคงที่ ส่วน timeLeft คือค่าที่ลดลงเรื่อย ๆ ทำให้สามารถ reset กลับค่าเดิมได้ง่าย

### คำถาม 1.2 formatTime() ฟังก์ชันนี้ทำความสำคัญอะไร? ถ้าไม่มีฟังก์ชันนี้ app จะเป็นยังไง

ใช้แปลงวินาทีเป็นรูปแบบ MM:SS ถ้าไม่มีจะแสดงเป็นตัวเลขวินาทีดิบ ๆ อ่านยาก

### คำถาม 1.3 อธิบายข้อแตกต่างระหว่าง setInterval() และ setTimeout()

setInterval() ทำงานซ้ำตามช่วงเวลา ส่วน setTimeout() ทำงานครั้งเดียวตามเวลาที่กำหนด

---

# ส่วนที่ 2: ฟังก์ชันการทำงาน

---

### คำถาม 2.1 เมื่อผู้ใช้คลิกปุ่ม “▶️ เริ่ม” ครั้งแรก เกิดอะไรขึ้นในลำดับใด

เรียก toggleTimer() → ตั้ง isRunning = true → สร้าง setInterval → ลด timeLeft ทุก 1 วิ → render ใหม่

### คำถาม 2.2 ในฟังก์ชัน toggleTimer() ทำไมจึงต้องมี clearInterval() ก่อนแล้วจึงตั้ง task.isRunning = false

เพื่อหยุด interval จริง ๆ ไม่ให้ทำงานต่อใน background แล้วค่อยเปลี่ยนสถานะเป็นหยุด

### คำถาม 2.3 ถ้า timer หมดเวลา จะเกิดความผิดพลาดใดหากไม่มี clearInterval()

timer จะติดลบและ interval จะยังทำงานต่อ ทำให้สิ้นเปลืองทรัพยากร

---

# ส่วนที่ 3: DOM และ UI

---

### คำถาม 3.1 ฟังก์ชัน renderTasks() สามารถแยกออกเป็นฟังก์ชันย่อยได้กี่ฟังก์ชัน

แยกเป็น renderEmptyState() และ renderTaskItem(task) จะทำให้โค้ดอ่านง่ายและจัดการง่ายขึ้น

### คำถาม 3.2 ใช้วิธีใดในการอัปเดต UI ทุกครั้งที่ timer เปลี่ยนแปลง มีวิธีอื่นหรือไม่

ปัจจุบัน re-render ทั้ง list ทุก 1 วิ ทางเลือกคืออัปเดตเฉพาะ DOM ของ timer

### คำถาม 3.3 “keypress” event listener ทำความสำคัญอะไร หากลบออกไป app จะเป็นยังไง

ทำให้กด Enter เพื่อเพิ่ม task ได้ ถ้าลบออกต้องกดปุ่มอย่างเดียว

---

# ส่วนที่ 4: Web Audio API

---

### คำถาม 4.1 อธิบายหน้าที่ของ oscillator.frequency, oscillator.type และ gainNode.gain

800 คือความถี่เสียง, sine คือรูปคลื่นเรียบ, gain 0.3 คือระดับความดัง

### คำถาม 4.2 ทำไมเสียง alarm จึงใช้เวลา 0.5 วินาที แล้วหยุด ถ้าเพิ่มเป็น 2 วินาทีจะส่งผลต่อ UX อย่างไร

0.5 วิสั้นและไม่รบกวนมาก ถ้า 2 วิจะชัดขึ้นแต่รบกวน UX มากขึ้น

---

# ส่วนที่ 5: Array Methods

---

### คำถาม 5.1 ในฟังก์ชัน deleteTask(id) ใช้ filter() เพื่ออะไร เขียนวิธีอื่นแทนได้หรือไม่

ใช้สร้าง array ใหม่ที่ไม่มี task นั้น สามารถใช้ findIndex() + splice() แทนได้

### คำถาม 5.2 ในฟังก์ชัน renderTasks() ใช้ map() เพื่อทำอะไร ถ้าใช้ forEach() แทนจะดีหรือไม่

ใช้แปลง array เป็น HTML string ถ้าใช้ forEach() ต้องจัดการสะสม string เอง

---

# ส่วนที่ 6: ข้อบกพร่องและการแก้ไข

---

### คำถาม 6.1 หากผู้ใช้เพิ่ม task 2 อัน แล้วคลิก “เริ่ม” บน task ทั้ง 2 อันพร้อมๆ กัน จะเกิดอะไรขึ้น

จะมี 2 interval ทำงานพร้อมกัน ไม่มี error แต่ใช้ทรัพยากรมากขึ้น

### คำถาม 6.2 ถ้า timer กำลังเดินอยู่ และผู้ใช้รีเฟรชหน้า (F5) task จะหายไป ทำไม วิธีแก้คืออะไร

เพราะข้อมูลเก็บใน memory เท่านั้น แก้โดยใช้ localStorage

### คำถาม 6.3 ในการทดสอบ app ที่ timer 30 นาที จะใช้เวลานานไปหรือไม่ เสนอวิธีทดสอบที่เร็วขึ้น

นานเกินไป ควรลด duration เหลือไม่กี่วินาทีตอนพัฒนา

---

# ส่วนที่ 7: Enhancement

---

### คำถาม 7.1 หากต้องการเพิ่มฟังก์ชัน “รีเซ็ต timer” คืนไปเป็น 30 นาที โค้ดจะเป็นยังไง

clearInterval → ตั้ง timeLeft = duration → isRunning = false → render ใหม่

### คำถาม 7.2 วิธีใดในการเก็บ tasks ไว้ใน LocalStorage เพื่อไม่ให้หายเมื่อรีเฟรชหน้า

ใช้ localStorage.setItem() ตอนบันทึก และ getItem() ตอนโหลด

### คำถาม 7.3 ถ้าต้องการให้ผู้ใช้กำหนดเวลา timer เอง จะต้องแก้ไขฟังก์ชันไหนบ้าง

เพิ่ม input เวลาใน HTML และแก้ addTask() ให้รับค่าจากผู้ใช้

---

# ส่วนที่ 8: Concepts เชิงลึก

---

### คำถาม 8.1 ทำไม renderTasks() จึงต้องเรียกหลายครั้ง มีวิธี DRY ที่ดีกว่าหรือไม่

เพราะ state เปลี่ยนต้อง sync UI วิธีที่ดีกว่าคืออัปเดตเฉพาะส่วนที่เปลี่ยน

### คำถาม 8.2 ถ้าเปลี่ยนจาก setInterval เป็น requestAnimationFrame จะส่งผลดีหรือไม่

ไม่เหมาะ เพราะ requestAnimationFrame ทำงาน ~60fps แต่ timer ต้องการ 1fps

### คำถาม 8.3 ในโค้ดที่ใช้ setInterval() มี Memory Leak ที่อาจเกิดขึ้นได้หรือไม่

มีได้ถ้าไม่ clearInterval() ก่อนลบหรือหยุด task
